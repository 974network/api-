<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© ØªÙ‚Ø·ÙŠØ¹ Ø§Ù„ÙÙˆØ§ÙƒÙ‡</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            width: 100%;
            text-align: center;
        }

        header {
            margin-bottom: 20px;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .info-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .info-label {
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .game-area {
            position: relative;
            height: 500px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .fruit {
            position: absolute;
            cursor: pointer;
            transition: transform 0.2s;
            user-select: none;
        }

        .fruit:hover {
            transform: scale(1.1);
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        button {
            padding: 12px 25px;
            font-size: 1rem;
            background: #FF5722;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        button:hover {
            background: #E64A19;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        button:active {
            transform: translateY(1px);
        }

        .level-screen, .game-over-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            border-radius: 15px;
        }

        .level-screen h2, .game-over-screen h2 {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #FFD700;
        }

        .level-screen p, .game-over-screen p {
            font-size: 1.5rem;
            margin-bottom: 30px;
        }

        .hidden {
            display: none;
        }

        .rating {
            display: flex;
            justify-content: center;
            margin: 15px 0;
        }

        .star {
            font-size: 2rem;
            color: #ddd;
            margin: 0 5px;
            transition: color 0.3s;
        }

        .star.filled {
            color: #FFD700;
        }

        .instructions {
            background: rgba(255, 255, 255, 0.15);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: right;
        }

        .instructions h3 {
            margin-bottom: 10px;
            color: #FFD700;
        }

        .instructions ul {
            list-style-type: none;
            padding-right: 20px;
        }

        .instructions li {
            margin-bottom: 8px;
            line-height: 1.5;
        }

        @media (max-width: 600px) {
            .game-area {
                height: 400px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .info-value {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Ù„Ø¹Ø¨Ø© ØªÙ‚Ø·ÙŠØ¹ Ø§Ù„ÙÙˆØ§ÙƒÙ‡</h1>
        </header>
        
        <div class="game-info">
            <div class="info-item">
                <div class="info-label">Ø§Ù„Ù†Ù‚Ø§Ø·</div>
                <div class="info-value" id="score">0</div>
            </div>
            <div class="info-item">
                <div class="info-label">Ø§Ù„Ù…Ø³ØªÙˆÙ‰</div>
                <div class="info-value" id="level">1</div>
            </div>
            <div class="info-item">
                <div class="info-label">Ø§Ù„ÙˆÙ‚Øª</div>
                <div class="info-value" id="timer">60</div>
            </div>
            <div class="info-item">
                <div class="info-label">Ø§Ù„ÙÙˆØ§ÙƒÙ‡ Ø§Ù„Ù…Ù‚Ø·ÙˆØ¹Ø©</div>
                <div class="info-value" id="fruits-cut">0</div>
            </div>
        </div>
        
        <div class="game-area" id="game-area">
            <div class="level-screen" id="level-screen">
                <h2>Ø§Ù„Ù…Ø³ØªÙˆÙ‰ <span id="level-number">1</span></h2>
                <p>Ø§Ø³ØªØ¹Ø¯!</p>
                <button id="start-level">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
            </div>
            
            <div class="game-over-screen hidden" id="game-over-screen">
                <h2>Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!</h2>
                <p>Ù†Ù‚Ø§Ø·Ùƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: <span id="final-score">0</span></p>
                <div class="rating" id="rating">
                    <span class="star"></span>
                    <span class="star"></span>
                    <span class="star"></span>
                    <span class="star"></span>
                    <span class="star"></span>
                </div>
                <button id="restart">Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</button>
            </div>
        </div>
        
        <div class="controls">
            <button id="pause">Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª</button>
            <button id="restart-game">Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„</button>
        </div>
        
        <div class="instructions">
            <h3>ÙƒÙŠÙÙŠØ© Ø§Ù„Ù„Ø¹Ø¨:</h3>
            <ul>
                <li>Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„ÙÙˆØ§ÙƒÙ‡ Ù„ØªÙ‚Ø·ÙŠØ¹Ù‡Ø§ ÙˆØ¬Ù…Ø¹ Ø§Ù„Ù†Ù‚Ø§Ø·</li>
                <li>ÙƒÙ„ Ù†ÙˆØ¹ Ù…Ù† Ø§Ù„ÙÙˆØ§ÙƒÙ‡ ÙŠØ¹Ø·ÙŠÙƒ Ù†Ù‚Ø§Ø· Ù…Ø®ØªÙ„ÙØ©</li>
                <li>Ù„Ø¯ÙŠÙƒ 60 Ø«Ø§Ù†ÙŠØ© ÙÙŠ ÙƒÙ„ Ù…Ø³ØªÙˆÙ‰</li>
                <li>ØªÙ‚Ø¯Ù… Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ Ø¹Ù†Ø¯ ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ù‡Ø¯Ù</li>
                <li>Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ 5 Ù†Ø¬ÙˆÙ… Ù„ØªØ­Ù‚ÙŠÙ‚ Ø£ÙØ¶Ù„ Ù†ØªÙŠØ¬Ø©!</li>
            </ul>
        </div>
    </div>

    <script>
        // Ø¹Ù†Ø§ØµØ± DOM
        const gameArea = document.getElementById('game-area');
        const scoreElement = document.getElementById('score');
        const levelElement = document.getElementById('level');
        const timerElement = document.getElementById('timer');
        const fruitsCutElement = document.getElementById('fruits-cut');
        const levelScreen = document.getElementById('level-screen');
        const levelNumber = document.getElementById('level-number');
        const startLevelButton = document.getElementById('start-level');
        const gameOverScreen = document.getElementById('game-over-screen');
        const finalScoreElement = document.getElementById('final-score');
        const ratingElement = document.getElementById('rating');
        const restartButton = document.getElementById('restart');
        const pauseButton = document.getElementById('pause');
        const restartGameButton = document.getElementById('restart-game');

        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
        let score = 0;
        let level = 1;
        let timeLeft = 60;
        let fruitsCut = 0;
        let gameActive = false;
        let timerInterval;
        let fruitInterval;
        let isPaused = false;

        // Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ÙÙˆØ§ÙƒÙ‡ ÙˆÙ‚ÙŠÙ…Ù‡Ø§
        const fruits = [
            { name: 'ØªÙØ§Ø­', points: 10, color: '#FF5252', emoji: 'ğŸ' },
            { name: 'Ù…ÙˆØ²', points: 15, color: '#FFD740', emoji: 'ğŸŒ' },
            { name: 'Ø¨Ø±ØªÙ‚Ø§Ù„', points: 12, color: '#FF9800', emoji: 'ğŸŠ' },
            { name: 'ÙØ±Ø§ÙˆÙ„Ø©', points: 20, color: '#E91E63', emoji: 'ğŸ“' },
            { name: 'Ø¹Ù†Ø¨', points: 8, color: '#9C27B0', emoji: 'ğŸ‡' },
            { name: 'Ø£Ù†Ø§Ù†Ø§Ø³', points: 25, color: '#FFC107', emoji: 'ğŸ' },
            { name: 'Ø¨Ø·ÙŠØ®', points: 30, color: '#4CAF50', emoji: 'ğŸ‰' }
        ];

        // Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª
        const levelGoals = [100, 250, 450, 700, 1000];

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
        function initGame() {
            score = 0;
            level = 1;
            timeLeft = 60;
            fruitsCut = 0;
            gameActive = false;
            isPaused = false;
            
            updateUI();
            showLevelScreen();
        }

        // Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ø³ØªÙˆÙ‰
        function showLevelScreen() {
            levelNumber.textContent = level;
            levelScreen.classList.remove('hidden');
            gameOverScreen.classList.add('hidden');
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø³ØªÙˆÙ‰
        function startLevel() {
            levelScreen.classList.add('hidden');
            gameActive = true;
            isPaused = false;
            pauseButton.textContent = 'Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª';
            
            // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª
            startTimer();
            
            // Ø¨Ø¯Ø¡ Ø¸Ù‡ÙˆØ± Ø§Ù„ÙÙˆØ§ÙƒÙ‡
            startFruitSpawning();
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª
        function startTimer() {
            clearInterval(timerInterval);
            timeLeft = 60;
            updateTimer();
            
            timerInterval = setInterval(() => {
                if (!isPaused) {
                    timeLeft--;
                    updateTimer();
                    
                    if (timeLeft <= 0) {
                        endLevel();
                    }
                }
            }, 1000);
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¤Ù‚Øª
        function updateTimer() {
            timerElement.textContent = timeLeft;
        }

        // Ø¨Ø¯Ø¡ Ø¸Ù‡ÙˆØ± Ø§Ù„ÙÙˆØ§ÙƒÙ‡
        function startFruitSpawning() {
            clearInterval(fruitInterval);
            
            // Ù…Ø¹Ø¯Ù„ Ø¸Ù‡ÙˆØ± Ø§Ù„ÙÙˆØ§ÙƒÙ‡ ÙŠØ²Ø¯Ø§Ø¯ Ù…Ø¹ ØªÙ‚Ø¯Ù… Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª
            const spawnRate = Math.max(500, 1000 - (level * 100));
            
            fruitInterval = setInterval(() => {
                if (!isPaused && gameActive) {
                    spawnFruit();
                }
            }, spawnRate);
        }

        // Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ÙƒÙ‡Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
        function spawnFruit() {
            const fruit = fruits[Math.floor(Math.random() * fruits.length)];
            const fruitElement = document.createElement('div');
            fruitElement.className = 'fruit';
            fruitElement.textContent = fruit.emoji;
            fruitElement.style.fontSize = `${40 + Math.random() * 20}px`;
            fruitElement.style.left = `${Math.random() * (gameArea.offsetWidth - 60)}px`;
            fruitElement.style.top = `${gameArea.offsetHeight}px`;
            fruitElement.dataset.points = fruit.points;
            
            // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø§Ø®ØªÙØ§Ø¡ Ø§Ù„ÙØ§ÙƒÙ‡Ø© Ø¨Ø¹Ø¯ ÙØªØ±Ø©
            setTimeout(() => {
                if (fruitElement.parentNode) {
                    fruitElement.remove();
                }
            }, 3000);
            
            // Ø¥Ø¶Ø§ÙØ© Ø­Ø¯Ø« Ø§Ù„Ù†Ù‚Ø±
            fruitElement.addEventListener('click', cutFruit);
            
            gameArea.appendChild(fruitElement);
            
            // ØªØ­Ø±ÙŠÙƒ Ø§Ù„ÙØ§ÙƒÙ‡Ø© Ù„Ù„Ø£Ø¹Ù„Ù‰
            let position = gameArea.offsetHeight;
            const moveInterval = setInterval(() => {
                if (!isPaused && fruitElement.parentNode) {
                    position -= 2 + level; // ØªØ²Ø¯Ø§Ø¯ Ø§Ù„Ø³Ø±Ø¹Ø© Ù…Ø¹ Ø§Ù„Ù…Ø³ØªÙˆÙ‰
                    fruitElement.style.top = `${position}px`;
                    
                    // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙØ§ÙƒÙ‡Ø© Ø¥Ø°Ø§ Ø®Ø±Ø¬Øª Ù…Ù† Ø§Ù„Ø´Ø§Ø´Ø©
                    if (position < -60) {
                        clearInterval(moveInterval);
                        fruitElement.remove();
                    }
                } else if (!fruitElement.parentNode) {
                    clearInterval(moveInterval);
                }
            }, 30);
        }

        // ØªÙ‚Ø·ÙŠØ¹ Ø§Ù„ÙØ§ÙƒÙ‡Ø©
        function cutFruit(e) {
            if (!gameActive || isPaused) return;
            
            const fruit = e.target;
            const points = parseInt(fruit.dataset.points);
            
            // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØ§Ù„ÙÙˆØ§ÙƒÙ‡ Ø§Ù„Ù…Ù‚Ø·ÙˆØ¹Ø©
            score += points;
            fruitsCut++;
            
            // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            updateUI();
            
            // ØªØ£Ø«ÙŠØ± Ø§Ù„ØªÙ‚Ø·ÙŠØ¹
            fruit.style.transform = 'scale(1.5)';
            fruit.style.opacity = '0.5';
            
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙØ§ÙƒÙ‡Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØªØ£Ø«ÙŠØ±
            setTimeout(() => {
                fruit.remove();
            }, 200);
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ù…Ø³ØªÙˆÙ‰
            if (level <= levelGoals.length && score >= levelGoals[level - 1]) {
                endLevel(true);
            }
        }

        // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        function updateUI() {
            scoreElement.textContent = score;
            levelElement.textContent = level;
            fruitsCutElement.textContent = fruitsCut;
        }

        // Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø³ØªÙˆÙ‰
        function endLevel(levelCompleted = false) {
            gameActive = false;
            clearInterval(timerInterval);
            clearInterval(fruitInterval);
            
            // Ø¥Ø²Ø§Ù„Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ÙƒÙ‡ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©
            document.querySelectorAll('.fruit').forEach(fruit => fruit.remove());
            
            if (levelCompleted && level < levelGoals.length) {
                // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ
                level++;
                setTimeout(() => {
                    showLevelScreen();
                }, 1000);
            } else {
                // Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
                endGame();
            }
        }

        // Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
        function endGame() {
            gameOverScreen.classList.remove('hidden');
            finalScoreElement.textContent = score;
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
            calculateRating();
        }

        // Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
        function calculateRating() {
            const maxScore = levelGoals[levelGoals.length - 1];
            const ratingValue = Math.min(5, Math.ceil((score / maxScore) * 5));
            
            const stars = ratingElement.querySelectorAll('.star');
            stars.forEach((star, index) => {
                if (index < ratingValue) {
                    star.classList.add('filled');
                } else {
                    star.classList.remove('filled');
                }
            });
        }

        // Ø¥ÙŠÙ‚Ø§Ù/Ø§Ø³ØªØ¦Ù†Ø§Ù Ø§Ù„Ù„Ø¹Ø¨Ø©
        function togglePause() {
            if (!gameActive) return;
            
            isPaused = !isPaused;
            pauseButton.textContent = isPaused ? 'Ø§Ø³ØªØ¦Ù†Ø§Ù' : 'Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª';
        }

        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©
        function restartGame() {
            clearInterval(timerInterval);
            clearInterval(fruitInterval);
            document.querySelectorAll('.fruit').forEach(fruit => fruit.remove());
            initGame();
        }

        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        startLevelButton.addEventListener('click', startLevel);
        restartButton.addEventListener('click', restartGame);
        pauseButton.addEventListener('click', togglePause);
        restartGameButton.addEventListener('click', restartGame);

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.onload = initGame;
    </script>
</body>
</html>
